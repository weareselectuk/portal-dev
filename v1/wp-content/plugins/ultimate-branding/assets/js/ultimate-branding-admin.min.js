/*! Ultimate Branding - v2.3.0
 * https://premium.wpmudev.org/project/ultimate-branding/
 * Copyright (c) 2018; * Licensed GPLv2+ */
jQuery(window.document).ready(function(a){"use strict";a(".ub_color_picker").wpColorPicker()}),jQuery(window.document).ready(function(a){a("#UltimateBrandingAdmin-search-input").on("change keydown keyup blur reset copy paste cut input",function(){var b,c=a(this).val(),d=a("#the-list");return""===c?void a("tr",d).show():(b=new RegExp(c,"i"),void a("td.title",d).each(function(){var c=a(this).html();c.match(b)?a(this).parent().show():a(this).parent().hide()}))})}),jQuery(window.document).ready(function(a){"use strict";a.fn.datepicker&&a(".simple-option input.datepicker").each(function(){a(this).datepicker({altFormat:"yy-mm-dd",altField:"#"+a(this).data("alt")})})}),jQuery(window.document).ready(function(){jQuery("form.tab-export-import #simple_options_import_file").on("change",function(a){var b=jQuery("form.tab-export-import #simple_options_import_button");if(""===jQuery(this).val())b.attr("disabled");else{var c=/json$/i;c.test(jQuery(this).val())&&b.removeAttr("disabled")}})}),jQuery(window.document).ready(function(a){"use strict";var b=a("#ub_main_site_favicon"),c=a("#wp_favicon"),d=a("#wp_favicon_id"),e=a("#wp_favicon_size"),f=a("#wp_login_image"),g=a("#wp_login_image_el"),h=a("#wp_login_image_id"),i=a("#wp_login_image_size"),j=a("#wp_login_image_width"),k=a("#wp_login_image_height"),l=a("#wp_login_image_width_wrap"),m=a("#wp_login_image_height_wrap");f.on("paste",function(b){f.unbind("change"),f.on("change",function(){var b=a(this),c=new window.Image,d=a(c),e=a(".spinner").first().clone();""!==a.trim(b.val())&&(g.prop("src",this.value),h.val(""),i.val(""),j.val(""),k.val("")),c.src=this.value,d.appendTo("body").hide(),g.after(e),e.show(),m.after(e),c.onload=function(){e.remove(),l.show(),m.show(),k.prop("type","number").val(this.height),j.prop("type","number").val(this.width),g.css({height:this.height,width:this.width})}})}),k.on("change",function(){g.css("height",this.value)}),j.on("change",function(){g.css("width",this.value)}),a("#wp_login_image_button").click(function(){return wp.media.editor.send.attachment=function(a,b){var c=a.size&&b.sizes[a.size]?b.sizes[a.size].url:b.url;f.val(c),g.prop("src",c),h.val(b.id),i.val(a.size),m.hide(),l.hide(),k.prop("type","hidden"),j.prop("type","hidden"),g.css({height:"auto",width:"auto"});var d=!!a.size&&b.sizes[a.size];"undefined"!=typeof d&&d!==!1?(j.val(d.width),k.val(d.height)):(j.val(""),k.val(""))},wp.media.string.props=function(b,c){var d=a(".spinner").first().clone(),e=new window.Image,f=a(e),g=a("#wp_login_image_el"),h=a("#wp_login_image");return f.appendTo("body").hide(),e.src=b.url,g.find(".spinner").length||g.before(d.show()),g.hide(),f.on("load",function(){d.remove(),f.remove(),g.prop("src",b.url).show()}),h.val(b.url),b},wp.media.editor.open(),!1}),a("#wp_favicon_button").click(function(a){a.preventDefault(),wp.media.editor.send.attachment=function(a,f){b.prop("src",f.url),c.val(f.url),d.val(f.id),e.val(a.size)},wp.media.editor.open()}),a("#wp_favicon").on("change",function(f){b.prop("src",a(this).val()),c.val(a(this).val()),d.val(""),e.val("full")}),a(window.document).on("click",".ub_favicons_browse",function(b){b.preventDefault();var c=a(this),d=c.closest("tr"),e=d.find(".ub_favicons_fav_url"),f=d.find(".ub_favicons_fav_id"),g=d.find(".ub_favicons_fav_size"),h=d.find(".ub_favicons_fav");wp.media.editor.send.attachment=function(a,b){h.prop("src",b.url),e.val(b.url),f.val(b.id),g.val(a.size)},wp.media.string.props=function(b,c){var d=a(".spinner").first().clone(),f=new window.Image,g=a(f);return g.appendTo("body").hide(),f.src=b.url,h.find(".spinner").length||h.before(d.show()),h.hide(),g.on("load",function(){d.remove(),g.remove(),h.prop("src",b.url).show()}),e.val(b.url),b},wp.media.editor.open()}),a(".ub_favicons_fav_url").on("change",function(b){var c=a(this),d=c.closest("tr"),e=d.find(".ub_favicons_fav_id"),f=d.find(".ub_favicons_fav_size"),g=d.find(".ub_favicons_fav"),h=a(this).val();h.length<3&&(h=g.data("default")),g.prop("src",h),e.val(""),f.val("full")}),a(window.document).on("click",".ub_favicons_save",function(b){var c=a(this),d=c.closest("tr"),e=d.find("input"),f=d.find(".spinner"),g={action:"ub_save_favicon"};e.each(function(){var b=a(this);g[this.name]=b.val()}),b.preventDefault(),f.show(),a.ajax({url:ajaxurl,type:"post",data:g,complete:function(){f.hide()},success:function(){},error:function(){}})}),a(window.document).on("click",".ub_favicons_reset",function(b){var c=a(this),d=c.closest("tr"),e=d.find(".ub_favicons_fav"),f=d.find(".ub_favicons_fav_url"),g=d.find(".spinner"),h=c.data("id"),i=a("#ub_favicons_"+h+"_reset").val(),j={action:"ub_reset_favicon",id:h,nonce:i};b.preventDefault(),g.show(),a.ajax({url:ajaxurl,type:"post",data:j,complete:function(){g.hide()},success:function(a){a.success&&(e.prop("src",a.data.fav),f.val(""))}})})}),jQuery(window.document).ready(function(a){function b(a){var b=jQuery(a),c=b.closest("tr");c.hasClass("simple-option-gallery")?jQuery(".image-wrapper",c).detach():(b.hide(),jQuery("input[type=hidden]",c).val(null),jQuery("img",c).attr("src",null))}function c(d,e){var f,g,h=a(d).closest(".image-wrapper"),i=a(".attachment-id",h).val();return e.preventDefault(),f?(f.uploader.uploader.param("post_id",i),void f.open()):(wp.media.model.settings.post.id=i,f=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1}),f.on("select",function(){var d=f.state().get("selection").first().toJSON();a(".image-preview",h).attr("src",d.url).css("width","auto"),a(".attachment-id",h).val(d.id),a(".image-reset",h).removeClass("disabled").show(),wp.media.model.settings.post.id=g;var e=h.closest("tr");if(e.hasClass("simple-option-gallery")&&""!==jQuery(".image-wrapper:last-child .attachment-id",e).val()){var i=wp.template("simple-options-media");jQuery(".images",e).append(i({id:h.data("id"),section_key:h.data("section_key"),disabled:"disabled"})),jQuery(".image-wrapper:last-child .button-select-image",e).on("click",function(a){c(this,a)}),jQuery(".images .image-reset",e).on("click",function(){return b(this),!1})}}),void f.open())}jQuery(".simple-option-media .images, .simple-option-gallery .images").each(function(){var a=wp.template("simple-options-media"),d=jQuery(this),e=window["_"+d.attr("id")];jQuery.each(e.images,function(){d.append(a(this)),jQuery(".image-wrapper:last-child .button-select-image",d).on("click",function(a){c(this,a)}),jQuery(".images .image-reset",d).on("click",function(){return b(this),!1})})}),jQuery(".simple-option-media .image-reset").on("click",function(){return b(this),!1}),jQuery(".simple-option-gallery .image-reset").on("click",function(a){return jQuery(this).closest(".image-wrapper").detach(),!1}),jQuery("a.add_media").on("click",function(){wp.media.model.settings.post.id=wp_media_post_id})}),jQuery(window.document).ready(function(){"use strict";null!==window.ub_admin.current_menu_sub_item&&(jQuery("#adminmenu .wp-submenu li.current").removeClass("current"),jQuery('a[href="admin.php?page=branding&tab='+window.ub_admin.current_menu_sub_item+'"]').parent().addClass("current"))}),jQuery(window.document).ready(function(a){function b(a){if(a.loading)return a.text;var b="<div class='select2-result-site clearfix'>";return b+="<div class='select2-result-title'>"+a.title+"</div>","undefined"!=typeof a.subtitle&&(b+="<div class='select2-result-subtitle'>"+a.subtitle+"</div>"),b+="</div>"}function c(a){return a.title||a.text}jQuery.fn.select2&&(a(".ub-select2").select2(),a(".ub-select2-ajax").select2({ajax:{url:ajaxurl,dataType:"json",delay:250,data:function(b){var c={user_id:a(this).data("user-id"),_wpnonce:a(this).data("nonce"),action:a(this).data("action"),page:b.page,q:b.term};return c},processResults:function(a,b){return b.page=b.page||1,{results:a.data,pagination:{more:30*b.page<a.total_count}}},cache:!0},minimumInputLength:1,escapeMarkup:function(a){return a},templateResult:b,templateSelection:c}))}),jQuery(window.document).ready(function(a){"use strict";a.fn.slider&&a(".simple-option div.ui-slider").each(function(){var b=a(this).data("target-id");if(b){var c=a("#"+b),d=c.val(),e=a(this).data("max")||100,f=a(this).data("min")||0;a(this).slider({value:d,min:f,max:e,slide:function(a,b){c.val(b.value)}})}}),a("table.sortable").sortable({items:"tr"}),a(".simple-option-reset-section a").on("click",function(){var b={action:"simple_option",tab:a("#ub-tab").val(),nonce:a(this).data("nonce"),network:a(this).data("network"),section:a(this).data("section")};return window.confirm(a(this).data("question"))&&jQuery.post(ajaxurl,b,function(a){a.success&&(window.location.href=a.data.redirect)}),!1}),a(".simple-options .postbox.section-is-slave").each(function(){var b=a(this),c=b.data("master-section"),d=b.data("master-field"),e=b.data("master-value");a('[name="simple_options['+c+"]["+d+']"]').on("change",function(){"checkbox"===a(this).attr("type")?"on"===e&&a(this).is(":checked")?b.show():"off"!==e||a(this).is(":checked")?b.hide():b.show():a(this).val()===e?b.show():b.hide()})}),a("button.handlediv.button-link, .hndle",a(".simple-options, .ultimate-colors")).on("click",function(b){b.preventDefault();var c=a(this).parent(),d=a(this).closest("form");c.toggleClass("closed"),a.post(ajaxurl,{action:"simple_option",close:c.hasClass("closed"),target:c.attr("id"),nonce:a("[name=postboxes_nonce]",d).val(),tab:a("[name=tab]",d).val()})}),a(".simple-option.simple-option-complex-master").each(function(){var b=a(this),c=b.data("master-section"),d=b.data("master-field"),e=b.data("master-value");"undefined"!=typeof c&&"undefined"!=typeof d&&"undefined"!=typeof e&&a('[name="simple_options['+c+"]["+d+"]").on("change",function(){window.console.log(a(this)),a(this).val()===e?b.show():b.hide()})}),a(".simple-options .ub-copy-section-settings a").on("click",function(b){b.preventDefault();var c=a(this).closest("div"),d={action:"simple_option","do":"copy",nonce:c.data("nonce"),module:c.data("module"),section:c.data("section"),from:a("select",c).val()};return"-1"===d.from?(window.alert(window.ub_admin.messages.copy.select_first),!1):(window.confirm(window.ub_admin.messages.copy.confirm)&&jQuery.post(ajaxurl,d,function(a){a.success?window.location.reload():"undefined"==typeof a.data.message?window.alert(window.ub_admin.messages.wrong):window.alert(a.data.message)}),!1)}),"false"!==ub_admin.editor_css&&jQuery(".ub_css_editor").each(function(){wp.codeEditor.initialize(a(this),ub_admin.editor_css)}),"false"!==ub_admin.editor_html&&jQuery(".ub_html_editor").each(function(){wp.codeEditor.initialize(a(this),ub_admin.editor_html)})}),jQuery(window.document).ready(function(){"use strict";if(jQuery.fn.switchButton){var a=function(){jQuery(".simple-option .master-field").each(function(){var a=jQuery(this).data("slave");if(a){var b=jQuery(".simple-option."+a),c=jQuery(".switch-button-background",jQuery(this).closest("td")).hasClass("checked");c&&"enabled-posts"===a&&(c=jQuery(".switch-button-background",jQuery('.simple-option .master-field[data-slave="enabled"]').closest("td")).hasClass("checked")),c?b.show():b.hide()}})};jQuery(".simple-option .switch-button").each(function(){var b={checked:jQuery(this).checked,on_label:jQuery(this).data("on")||switch_button.labels.label_on,off_label:jQuery(this).data("off")||switch_button.labels.label_off,on_callback:a,off_callback:a};jQuery(this).switchButton(b)})}}),jQuery(window.document).ready(function(a){"use strict";function b(){h.removeClass("ub-hidden"),k=j.width()+40,l=[],m=d.width(),e.each(function(b){m>=k+a(this).width()?k+=a(this).width():(a(this).addClass("ub-hidden"),l.push(b))}),l.length?g.each(function(b){l.includes(b)||a(this).addClass("ub-hidden")}):(i.addClass("ub-hidden"),c.removeClass("ub-show-secondary"),j.attr("aria-expanded",!1))}var c=a(".tabs"),d=a(".ub-primary",c),e=a(".ub-primary > li:not(.ub-more)",c);c.addClass("ub-jsfied"),d.append('<li class="ub-more"><button type="button" class="ub-tab-more-button nav-tab" aria-haspopup="true" aria-expanded="false">'+ub_admin.tab_more+'</button><ul class="ub-secondary">'+d.html()+"</ul></li>");var f=a(".ub-secondary",c),g=a("li",f),h=a("li",c),i=a(".ub-more",d),j=a("button",i);j.on("click",function(){c.toggleClass("ub-show-secondary"),j.attr("aria-expanded",c.hasClass("ub-show-secondary"))});var k,l,m;b(),a(window).resize(function(){b()}),a(window.document).on("click",function(b){for(var d=a(b.target);1===d.length;){if(d.hasClass("ub-tab-more-button")||d.hasClass("ub-secondary"))return;d=d.parent()}c.removeClass("ub-show-secondary"),j.attr("aria-expanded",!1)})}),jQuery(window.document).ready(function(){"use strict";jQuery.fn.switchButton&&(jQuery("#ultimate-branding-modules .switch-button").switchButton({on_label:jQuery(this).data("enable")||switch_button.labels.label_enable,off_label:jQuery(this).data("disable")||switch_button.labels.label_disable}),jQuery("#ultimate-branding-modules input.switch-button").on("change",function(){var a=jQuery(this),b={action:"ultimate_branding_toggle_module",module:a.val(),nonce:a.data("nonce"),state:a.prop("checked")?"on":"off"};jQuery.post(ajaxurl,b,function(a){a.success&&window.location.reload()})}))}),jQuery(window.document).ready(function(a){var b=a("#login-screen-reset-image");b.on("click",function(){return a("#wp_login_image_el").attr("width",b.data("width")).attr("src",b.data("src")).attr("height",b.data("height")),a("#wp_login_image").val(b.data("src")),a("#wp_login_image_width").val(b.data("width")),a("#wp_login_image_height").val(b.data("height")),a("#wp_login_image_id").val("reset"),!1})}),jQuery(window.document).ready(function(a){var b=a("#favicon-reset-main-image");b.on("click",function(){return a("#ub_main_site_favicon").attr("src",a("#wp_favicon").data("default")),a("#wp_favicon").val(a("#wp_favicon").data("default")),!1})});